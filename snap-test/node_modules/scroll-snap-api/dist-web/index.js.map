{"version":3,"file":"index.js","sources":["../dist-src/index.js"],"sourcesContent":["export function scrollSnapToNext(element, direction, scrollToOptions = { behavior: 'smooth' }) {\r\n    // Pretend we're already this many pixels past the current scroll point in the direction we want to go.\r\n    // Helps avoid rounding errors in element sizes.\r\n    let scrollFuzz = 2;\r\n    const axis = (direction === 'up' || direction === 'down') ? 'y' : 'x';\r\n    const sign = (direction === 'right' || direction === 'down') ? '+' : '-';\r\n    const maxScroll = (axis === 'x') ?\r\n        element.scrollWidth - element.offsetWidth :\r\n        element.scrollHeight - element.offsetHeight;\r\n    const scrollSnapPositions = getScrollSnapPositions(element)[axis];\r\n    if (sign === '-') {\r\n        scrollFuzz *= -1;\r\n    }\r\n    const currentScrollPosition = element[axis === 'x' ? 'scrollLeft' : 'scrollTop'] + scrollFuzz;\r\n    const nextScrollPositions = scrollSnapPositions\r\n        .filter(pos => {\r\n        if (sign === '+') {\r\n            return pos > currentScrollPosition;\r\n        }\r\n        else {\r\n            return pos < currentScrollPosition;\r\n        }\r\n    })\r\n        .sort((a, b) => sign === '+' ? a - b : b - a);\r\n    let nextScrollPosition;\r\n    if (nextScrollPositions.length > 0) {\r\n        nextScrollPosition = nextScrollPositions[0];\r\n    }\r\n    else {\r\n        if (sign === '+') {\r\n            nextScrollPosition = maxScroll;\r\n        }\r\n        else {\r\n            nextScrollPosition = 0;\r\n        }\r\n    }\r\n    // scrollTo might return a promise in the future\r\n    return element.scrollTo({\r\n        ...scrollToOptions,\r\n        [axis === 'x' ? 'left' : 'top']: nextScrollPosition,\r\n    });\r\n}\r\nexport function getScrollPadding(element) {\r\n    const style = window.getComputedStyle(element);\r\n    const rect = element.getBoundingClientRect();\r\n    let xBeforeRaw = style.getPropertyValue('scroll-padding-left').replace('auto', '0px');\r\n    let yBeforeRaw = style.getPropertyValue('scroll-padding-top').replace('auto', '0px');\r\n    let xAfterRaw = style.getPropertyValue('scroll-padding-right').replace('auto', '0px');\r\n    let yAfterRaw = style.getPropertyValue('scroll-padding-bottom').replace('auto', '0px');\r\n    /**\r\n     * Convert a CSS length to a number.\r\n     * @param raw CSS length value\r\n     * @param size Parent size, used for percentage lengths\r\n     */\r\n    function convert(raw, size) {\r\n        let n = parseFloat(raw);\r\n        if (/%/.test(raw)) {\r\n            n /= 100;\r\n            n *= size;\r\n        }\r\n        return n;\r\n    }\r\n    ;\r\n    let xBefore = convert(xBeforeRaw, rect.width);\r\n    let yBefore = convert(yBeforeRaw, rect.height);\r\n    let xAfter = convert(xAfterRaw, rect.width);\r\n    let yAfter = convert(yAfterRaw, rect.height);\r\n    return {\r\n        x: {\r\n            before: xBefore,\r\n            after: xAfter,\r\n        },\r\n        y: {\r\n            before: yBefore,\r\n            after: yAfter,\r\n        },\r\n    };\r\n}\r\nfunction domRectIntersects(a, b, axis = 'both') {\r\n    return (axis === 'x' &&\r\n        a.right >= b.left &&\r\n        a.left <= b.right) || (axis === 'y' &&\r\n        a.bottom >= b.top &&\r\n        a.top <= b.bottom) || (axis === 'both' &&\r\n        a.right >= b.left &&\r\n        a.left <= b.right &&\r\n        a.bottom >= b.top &&\r\n        a.top <= b.bottom);\r\n}\r\nfunction getAllDescendants(parent) {\r\n    let children = [];\r\n    for (const child of parent.children) {\r\n        children = children.concat(child, getAllDescendants(child));\r\n    }\r\n    return children;\r\n}\r\nexport function getSnapPositions(parent, excludeOffAxis = true) {\r\n    const parentRect = parent.getBoundingClientRect();\r\n    const positions = {\r\n        x: {\r\n            start: [],\r\n            center: [],\r\n            end: [],\r\n        },\r\n        y: {\r\n            start: [],\r\n            center: [],\r\n            end: [],\r\n        },\r\n    };\r\n    const descendants = getAllDescendants(parent);\r\n    for (const axis of ['x', 'y']) {\r\n        const orthogonalAxis = axis === 'x' ? 'y' : 'x';\r\n        const axisStart = axis === 'x' ? 'left' : 'top';\r\n        const axisSize = axis === 'x' ? 'width' : 'height';\r\n        const axisScroll = axis === 'x' ? 'scrollLeft' : 'scrollTop';\r\n        for (const child of descendants) {\r\n            const childRect = child.getBoundingClientRect();\r\n            // Skip child if it doesn't intersect the parent's opposite axis (it can never be in view)\r\n            if (excludeOffAxis && !domRectIntersects(parentRect, childRect, orthogonalAxis)) {\r\n                continue;\r\n            }\r\n            const childStyle = window.getComputedStyle(child);\r\n            let [childAlignY, childAlignX] = childStyle.getPropertyValue('scroll-snap-align').split(' ');\r\n            if (typeof childAlignX === 'undefined') {\r\n                childAlignX = childAlignY;\r\n            }\r\n            const childAlign = axis === 'x' ? childAlignX : childAlignY;\r\n            const childOffsetStart = childRect[axisStart] - parentRect[axisStart] + parent[axisScroll];\r\n            switch (childAlign) {\r\n                case 'none':\r\n                    break;\r\n                case 'start':\r\n                    positions[axis].start.push(childOffsetStart);\r\n                    break;\r\n                case 'center':\r\n                    positions[axis].center.push(childOffsetStart + (childRect[axisSize] / 2));\r\n                    break;\r\n                case 'end':\r\n                    positions[axis].end.push(childOffsetStart + childRect[axisSize]);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    return positions;\r\n}\r\nexport function getScrollSnapPositions(element) {\r\n    const rect = element.getBoundingClientRect();\r\n    const scrollPadding = getScrollPadding(element);\r\n    const snapPositions = getSnapPositions(element);\r\n    const maxScroll = {\r\n        x: element.scrollWidth - element.offsetWidth,\r\n        y: element.scrollHeight - element.offsetHeight,\r\n    };\r\n    const clamp = (min, max) => (value) => Math.max(min, Math.min(max, value));\r\n    return {\r\n        x: unique([\r\n            ...snapPositions.x.start.map(v => v - scrollPadding.x.before),\r\n            ...snapPositions.x.center.map(v => v - (rect.width / 2)),\r\n            ...snapPositions.x.end.map(v => v - rect.width + scrollPadding.x.after),\r\n        ]\r\n            .map(clamp(0, maxScroll.x))),\r\n        y: unique([\r\n            ...snapPositions.y.start.map(v => v - scrollPadding.y.before),\r\n            ...snapPositions.y.center.map(v => v - (rect.height / 2)),\r\n            ...snapPositions.y.end.map(v => v - rect.height + scrollPadding.y.after),\r\n        ]\r\n            .map(clamp(0, maxScroll.y))),\r\n    };\r\n}\r\nfunction unique(iterable) {\r\n    return Array.from(new Set(iterable));\r\n}\r\n"],"names":[],"mappings":"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"}